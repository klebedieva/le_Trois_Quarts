{% extends '@EasyAdmin/layout.html.twig' %}

{% block content_title %}Confirmer la réservation{% endblock %}

{% block main %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Détails de la réservation</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Client :</strong> {{ reservation.firstName }} {{ reservation.lastName }}</p>
                            <p><strong>Email :</strong> {{ reservation.email }}</p>
                            <p><strong>Téléphone :</strong> {{ reservation.phone }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Date :</strong> {{ reservation.date|date('d/m/Y') }}</p>
                            <p><strong>Heure :</strong> {{ reservation.time }}</p>
                            <p><strong>Nombre de personnes :</strong> {{ reservation.guests }} {% if reservation.guests == 1 %}personne{% else %}personnes{% endif %}</p>
                        </div>
                    </div>
                    {% if reservation.message %}
                    <div class="mt-3">
                        <p><strong>Message du client :</strong></p>
                        <div class="alert alert-light">
                            {{ reservation.message|nl2br }}
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5 class="card-title mb-0">Confirmer la réservation</h5>
                </div>
                <div class="card-body">
                    <form method="post" action="{{ ea_url().setAction('confirm').set('entityId', reservation.id) }}">
                        <div class="mb-3">
                            <label for="confirmationMessage" class="form-label">Message de confirmation</label>
                            <textarea class="form-control" id="confirmationMessage" name="confirmationMessage" rows="8" required 
                                placeholder="Rédigez un message personnalisé pour le client...">Votre réservation pour le {{ reservation.date|date('d/m/Y') }} à {{ reservation.time }} pour {{ reservation.guests }} {% if reservation.guests == 1 %}personne{% else %}personnes{% endif %} a été confirmée.

Nous avons hâte de vous accueillir au restaurant !</textarea>
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-success">
                                <i class="fa fa-check me-2"></i>Confirmer et envoyer l'email
                            </button>
                            <a href="{{ ea_url().setAction('index') }}" class="btn btn-secondary">
                                <i class="fa fa-arrow-left me-2"></i>Retour à la liste
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

{# Styles déplacés dans static/css/admin-styles.css #}
{% endblock %}
