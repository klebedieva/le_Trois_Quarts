{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <!-- Page-specific styles for the contact page -->
    <link rel="stylesheet" href="{{ asset('static/css/contact.css') }}?v={{ 'now'|date('YmdHis') }}">
{% endblock %}

{% block body %}
    <!-- Success Message -->
    {% for message in app.flashes('success') %}
        <div class="alert alert-success alert-dismissible fade show alert-fixed-center" id="successMessage" role="alert" aria-live="polite">
            <i class="bi bi-check-circle me-2" aria-hidden="true"></i>{{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fermer le message de succès"></button>
        </div>
    {% endfor %}

    <!-- Contact Header -->
    <section class="contact-header">
        <picture class="hero-media">
            <img src="{{ asset('static/img/contact.jpg') }}" alt="Intérieur du restaurant Le Trois Quarts" loading="lazy">
        </picture>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center text-white">
                    <h1 class="display-4 mb-4">Nous Contacter</h1>
                    <p class="lead">Une question ? Une suggestion ? N'hésitez pas à nous écrire</p>
                    <div class="contact-hero-divider"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="py-5 bg-light contact-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="contact-info text-center p-4 rounded-2 hover-bg-light" role="region" aria-labelledby="contact-address-title">
                                <div class="contact-icon" aria-hidden="true">
                                    <i class="bi bi-geo-alt"></i>
                                </div>
                                <h5 id="contact-address-title">Adresse</h5>
                                <address>
                                    <p>139 Boulevard Chave<br>13005 Marseille</p>
                                </address>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="contact-info text-center p-4 rounded-2 hover-bg-light" role="region" aria-labelledby="contact-phone-title">
                                <div class="contact-icon" aria-hidden="true">
                                    <i class="bi bi-telephone"></i>
                                </div>
                                <h5 id="contact-phone-title">Téléphone</h5>
                                <p><a href="tel:0491929616" aria-label="Appeler le restaurant au 04 91 92 96 16">04 91 92 96 16</a></p>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="contact-info text-center p-4 rounded-2 hover-bg-light" role="region" aria-labelledby="contact-email-title">
                                <div class="contact-icon" aria-hidden="true">
                                    <i class="bi bi-envelope"></i>
                                </div>
                                <h5 id="contact-email-title">Email</h5>
                                <p><a href="mailto:letroisquarts@gmail.com" aria-label="Envoyer un email à letroisquarts@gmail.com">letroisquarts@gmail.com</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Form Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="contact-form-card">
                        <h3 class="text-center mb-4" id="contact-form-title">Envoyez-nous un message</h3>
                        
                        
                        {{ form_start(contactForm, {'attr': {'class': 'contact-form', 'novalidate': 'novalidate', 'aria-labelledby': 'contact-form-title'}}) }}
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    {{ form_label(contactForm.firstName, null, {'label_attr': {'class': 'form-label'}}) }}
                                    {{ form_widget(contactForm.firstName, {'attr': {'class': 'form-control'}}) }}
                                    <div class="invalid-feedback" id="firstNameError"></div>
                                    {{ form_errors(contactForm.firstName) }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    {{ form_label(contactForm.lastName, null, {'label_attr': {'class': 'form-label'}}) }}
                                    {{ form_widget(contactForm.lastName, {'attr': {'class': 'form-control'}}) }}
                                    <div class="invalid-feedback" id="lastNameError"></div>
                                    {{ form_errors(contactForm.lastName) }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    {{ form_label(contactForm.email, null, {'label_attr': {'class': 'form-label'}}) }}
                                    {{ form_widget(contactForm.email, {'attr': {'class': 'form-control'}}) }}
                                    <div class="invalid-feedback" id="emailError"></div>
                                    {{ form_errors(contactForm.email) }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    {{ form_label(contactForm.phone, null, {'label_attr': {'class': 'form-label'}}) }}
                                    {{ form_widget(contactForm.phone, {'attr': {'class': 'form-control'}}) }}
                                    <div class="invalid-feedback" id="phoneError"></div>
                                    {{ form_errors(contactForm.phone) }}
                                </div>
                            </div>
                            <div class="mb-3">
                                {{ form_label(contactForm.subject, null, {'label_attr': {'class': 'form-label'}}) }}
                                {{ form_widget(contactForm.subject, {'attr': {'class': 'form-select'}}) }}
                                <div class="invalid-feedback" id="subjectError"></div>
                                {{ form_errors(contactForm.subject) }}
                            </div>
                            <div class="mb-3">
                                {{ form_label(contactForm.message, null, {'label_attr': {'class': 'form-label'}}) }}
                                {{ form_widget(contactForm.message, {'attr': {'class': 'form-control', 'rows': 5, 'placeholder': 'Votre message...'}}) }}
                                <div class="invalid-feedback" id="messageError"></div>
                                {{ form_errors(contactForm.message) }}
                            </div>
                            <div class="mb-3 form-check">
                                {{ form_widget(contactForm.consent, {'attr': {'class': 'form-check-input'}}) }}
                                {{ form_label(contactForm.consent, null, {'label_attr': {'class': 'form-check-label'}}) }}
                                <div class="invalid-feedback" id="consentError"></div>
                                {{ form_errors(contactForm.consent) }}
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg" aria-label="Envoyer le message de contact">
                                    <i class="bi bi-send me-2" aria-hidden="true"></i>Envoyer le message
                                </button>
                            </div>
                        {{ form_end(contactForm) }}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="py-5 map-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 mx-auto">
                    <h3 class="text-center mb-4">Nous trouver</h3>
                    <div class="map-container">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2903.8234567890123!2d5.3827!3d43.2965!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDPCsDE3JzQ3LjQiTiA1wrAyMic1Ny42IkU!5e0!3m2!1sfr!2sfr!4v1234567890123"
                            width="100%" 
                            height="400" 
                            class="rounded shadow map-border"
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade"
                            title="Carte Google Maps montrant l'emplacement du restaurant Le Trois Quarts au 139 Boulevard Chave, 13005 Marseille"
                            aria-label="Carte interactive montrant l'emplacement du restaurant">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Hours Section -->
    <section class="py-5 contact-hours-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h3 class="mb-4">Horaires d'ouverture</h3>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="hours-info">
                                <h5><i class="bi bi-clock me-2"></i>Service continu</h5>
                                <p class="mb-0">Lundi - Dimanche</p>
                                <p class="h4">8h00 - 23h00</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="hours-info">
                                <h5><i class="bi bi-sun me-2"></i>Terrasse</h5>
                                <p class="mb-0">Ouverte selon météo</p>
                                <p class="h4">Toute la journée</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Cart sidebar is now included in base template -->
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <!-- Custom JS -->
    <script src="{{ asset('static/js/utils/form-validation.js') }}?v=1"></script>
    <script src="{{ asset('static/js/contact.js') }}"></script>
{% endblock %}
