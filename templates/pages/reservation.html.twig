{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <!-- Page-specific styles shared with contact/reservation forms -->
    <link rel="stylesheet" href="{{ asset('static/css/contact.css') }}?v={{ 'now'|date('YmdHis') }}">
{% endblock %}

{% block body %}
    <!-- Success Message -->
    {% for message in app.flashes('success') %}
        <div class="alert alert-success alert-dismissible fade show alert-fixed-center" id="successMessage">
            <i class="bi bi-check-circle me-2"></i>{{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}

    <!-- Reservation Header Banner -->
    <section class="reservation-header py-5">
        <picture class="hero-media">
            <img src="{{ asset('static/img/banner_2.jpg') }}" alt="Salle du restaurant pour les réservations" loading="lazy">
        </picture>
        <div class="hero-overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 mb-4">Réservez votre table</h1>
                    <p class="lead">Garantissez-vous une place sur notre terrasse ensoleillée ou dans notre salle chaleureuse</p>
                    <div class="reservation-hero-divider"></div>

                    <div class="reservation-stats mb-4">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="stat-item text-center p-3 rounded-3">
                                    <h3 class="text-custom-primary">7j/7</h3>
                                    <p>Ouvert tous les jours</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-item text-center p-3 rounded-3">
                                    <h3 class="text-custom-primary">15h</h3>
                                    <p>Service continu</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-item text-center p-3 rounded-3">
                                    <h3 class="text-custom-primary">20</h3>
                                    <p>Personnes max</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reservation Section -->
    <section id="reservation" class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <h2 class="section-title text-center text-lg-start mb-4">Informations pratiques</h2>
                    <p class="lead text-center text-lg-start mb-4">Découvrez nos services et réservez votre table en quelques clics.</p>
                    <div class="reservation-info">
                        <div class="info-item mb-3 d-flex align-items-center">
                            <i class="bi bi-clock me-2"></i>
                            <span>Ouvert tous les jours de 8h à 23h</span>
                        </div>
                        <div class="info-item mb-3 d-flex align-items-center">
                            <i class="bi bi-people me-2"></i>
                            <span>Groupes jusqu'à 20 personnes</span>
                        </div>
                        <div class="info-item d-flex align-items-center">
                            <i class="bi bi-telephone me-2"></i>
                            <span>04 91 92 96 16</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="reservation-form p-4 rounded shadow reservation-form-bg">
                        <h3 class="text-center mb-4 mt-4">Réservez votre table</h3>
                        
                        {{ form_start(reservationForm, {'attr': {'id': 'reservationForm', 'class': 'contact-form', 'novalidate': 'novalidate'}}) }}
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    {{ form_label(reservationForm.firstName, null, {'label_attr': {'class': 'form-label text-dark'}}) }}
                                    {{ form_widget(reservationForm.firstName, {'attr': {'class': 'form-control form-control-custom'}}) }}
                                    <div class="invalid-feedback" id="reservation_firstNameError"></div>
                                    {{ form_errors(reservationForm.firstName) }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    {{ form_label(reservationForm.lastName, null, {'label_attr': {'class': 'form-label text-dark'}}) }}
                                    {{ form_widget(reservationForm.lastName, {'attr': {'class': 'form-control form-control-custom'}}) }}
                                    <div class="invalid-feedback" id="reservation_lastNameError"></div>
                                    {{ form_errors(reservationForm.lastName) }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    {{ form_label(reservationForm.email, null, {'label_attr': {'class': 'form-label text-dark'}}) }}
                                    {{ form_widget(reservationForm.email, {'attr': {'class': 'form-control form-control-custom'}}) }}
                                    <div class="invalid-feedback" id="reservation_emailError"></div>
                                    {{ form_errors(reservationForm.email) }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    {{ form_label(reservationForm.phone, null, {'label_attr': {'class': 'form-label text-dark'}}) }} <span class="text-danger">*</span>
                                    {{ form_widget(reservationForm.phone, {'attr': {'class': 'form-control form-control-custom'}}) }}
                                    <div class="invalid-feedback" id="reservation_phoneError"></div>
                                    {{ form_errors(reservationForm.phone) }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    {{ form_label(reservationForm.date, null, {'label_attr': {'class': 'form-label text-dark'}}) }}
                                    {{ form_widget(reservationForm.date, {'attr': {'class': 'form-control form-control-custom'}}) }}
                                    <div class="invalid-feedback" id="reservation_dateError"></div>
                                    {{ form_errors(reservationForm.date) }}
                                </div>
                                <div class="col-md-4 mb-3">
                                    {{ form_label(reservationForm.time, null, {'label_attr': {'class': 'form-label text-dark'}}) }}
                                    {{ form_widget(reservationForm.time, {'attr': {'class': 'form-select form-select-custom'}}) }}
                                    <div class="invalid-feedback" id="reservation_timeError"></div>
                                    {{ form_errors(reservationForm.time) }}
                                </div>
                                <div class="col-md-4 mb-3">
                                    {{ form_label(reservationForm.guests, null, {'label_attr': {'class': 'form-label text-dark'}}) }}
                                    {{ form_widget(reservationForm.guests, {'attr': {'class': 'form-select form-select-custom'}}) }}
                                    <div class="invalid-feedback" id="reservation_guestsError"></div>
                                    {{ form_errors(reservationForm.guests) }}
                                </div>
                            </div>
                            <div class="mb-3">
                                {{ form_label(reservationForm.message, null, {'label_attr': {'class': 'form-label text-dark'}}) }}
                                {{ form_widget(reservationForm.message, {'attr': {'class': 'form-control form-control-custom', 'rows': 3, 'placeholder': 'Demandes spéciales, allergies...'}}) }}
                                <div class="invalid-feedback" id="reservation_messageError"></div>
                                {{ form_errors(reservationForm.message) }}
                            </div>
                            <div class="text-center mb-4">
                                <button type="submit" class="btn btn-custom-secondary btn-lg w-100">
                                    <i class="bi bi-calendar-check me-2"></i>Réserver maintenant
                                </button>
                            </div>
                            {{ form_rest(reservationForm) }}
                        {{ form_end(reservationForm) }}
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('static/js/utils/form-validation.js') }}?v=1"></script>
    <script src="{{ asset('static/js/reservation.js') }}?v=16"></script>
{% endblock %}